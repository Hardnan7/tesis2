CREATE TABLE categoria (id BIGINT AUTO_INCREMENT, nombre_categoria VARCHAR(45) NOT NULL, descripcion VARCHAR(45) NOT NULL, tipo VARCHAR(45) NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE cliente (id BIGINT AUTO_INCREMENT, rut VARCHAR(10) NOT NULL, razon_social VARCHAR(45) NOT NULL, giro VARCHAR(45) NOT NULL, nombre_representante VARCHAR(45) NOT NULL, direccion VARCHAR(45), telefono_contacto BIGINT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE container (id BIGINT AUTO_INCREMENT, capacidad BIGINT NOT NULL, tipo VARCHAR(45) NOT NULL, venta_chatarra_id BIGINT, INDEX venta_chatarra_id_idx (venta_chatarra_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE empleado (id BIGINT AUTO_INCREMENT, rut VARCHAR(10) NOT NULL, nombres VARCHAR(45) NOT NULL, apellidos VARCHAR(45) NOT NULL, email VARCHAR(45) NOT NULL UNIQUE, fecha_nac DATETIME, direccion VARCHAR(45), ciudad_residencia VARCHAR(45), telefono BIGINT NOT NULL, fecha_contrato DATETIME NOT NULL, fecha_fin_contrato DATETIME NOT NULL, sueldo BIGINT, nombre_usuario BIGINT NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE equipo (id BIGINT AUTO_INCREMENT, origen VARCHAR(45), marca VARCHAR(45) NOT NULL, peso BIGINT, estado TINYINT(1) NOT NULL, detalle VARCHAR(255), usuario_id BIGINT, categoria_id BIGINT, empleado_id BIGINT, venta_equipo_id BIGINT, INDEX venta_equipo_id_idx (venta_equipo_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE pieza (id BIGINT AUTO_INCREMENT, marca VARCHAR(45), estado TINYINT(1), detalle VARCHAR(45), usuario_id BIGINT, categoria_id BIGINT, empleado_id BIGINT, container_id BIGINT, venta_pieza_id BIGINT, INDEX venta_pieza_id_idx (venta_pieza_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE usuario (id BIGINT AUTO_INCREMENT, rut BIGINT NOT NULL, nombres VARCHAR(45) NOT NULL, apellidos VARCHAR(45) NOT NULL, email VARCHAR(45) NOT NULL UNIQUE, fecha_nac DATETIME, direccion VARCHAR(45), ciudad VARCHAR(45), telefono BIGINT NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE venta_chatarra (id BIGINT AUTO_INCREMENT, monto BIGINT NOT NULL, fecha DATETIME NOT NULL, detalle VARCHAR(255) NOT NULL, tipo VARCHAR(45) NOT NULL, cliente_id BIGINT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE venta_equipo (id BIGINT AUTO_INCREMENT, fecha DATETIME NOT NULL, tipo VARCHAR(45) NOT NULL, monto BIGINT NOT NULL, detalle VARCHAR(255), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE venta_pieza (id BIGINT AUTO_INCREMENT, fecha DATETIME NOT NULL, tipo VARCHAR(45) NOT NULL, monto BIGINT NOT NULL, detalle VARCHAR(255), cliente VARCHAR(45) NOT NULL, gastos_envio BIGINT, PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE container ADD CONSTRAINT container_venta_chatarra_id_venta_chatarra_id FOREIGN KEY (venta_chatarra_id) REFERENCES venta_chatarra(id);
ALTER TABLE equipo ADD CONSTRAINT equipo_venta_equipo_id_venta_equipo_id FOREIGN KEY (venta_equipo_id) REFERENCES venta_equipo(id);
ALTER TABLE pieza ADD CONSTRAINT pieza_venta_pieza_id_venta_pieza_id FOREIGN KEY (venta_pieza_id) REFERENCES venta_pieza(id) ON DELETE CASCADE;
